    <div class="col-lg-4">
      <%# valores seguros por si no tenés fee/currency aún %>
      <% fee_value = defined?(@service.service_fee) && @service.service_fee.present? ? @service.service_fee : 10 %>
      <% currency_value = defined?(@service.currency) && @service.currency.present? ? @service.currency : "ARS" %>

      <div class="card booking-card shadow rounded-4"
           data-controller="booking"
           data-booking-rate-value="<%= @service.price.to_f %>"
           data-booking-fee-value="<%= fee_value.to_f %>"
           data-booking-currency-value="<%= currency_value %>">
        <div class="card-body">
          <h6 class="fw-bold bg-success text-white p-3 rounded-1">Reserva tu Servicio de <%= @service.sub_category %></h6>
          <hr>
          <%= form_with model: @order, url: orders_path, html: { id: "booking-form" } do |f| %>

            <div class="mb-3">
              <label class="form-label">Fecha</label>
              <%= f.date_field :date, class: "form-control", required: true %>
            </div>

            <div class="row g-2">
              <div class="col-6">
                <label class="form-label">Hora de inicio</label>
                <%= f.time_field :start_time, class: "form-control",
                                 step: 1800,
                                 data: { booking_target: "start" } %>
              </div>
              <div class="col-6">
                <label class="form-label">Hora de finalización</label>
                <%= f.time_field :end_time, class: "form-control",
                                 step: 1800,
                                 data: { booking_target: "end" } %>
              </div>
            </div>

            <div class="row g-2 mt-2">
              <div class="col-6">
                <label class="form-label">Horas</label>
                <%= f.number_field :hours, class: "form-control",
                                   step: 0.5, min: 1,
                                   data: { booking_target: "hours" } %>
              </div>
              <div class="col-6">
                <label class="form-label">Precio Unitario</label>
                <input class="form-control" value="<%= @service.price.to_f %>" readonly data-booking-target="unitPrice">
              </div>
            </div>

            <hr>

            <ul class="list-unstyled small">
              <li class="d-flex justify-content-between align-items-center mb-1 fw-bold">
                <span>Subtotal</span>
                <strong data-booking-target="subtotal">$0.00</strong>
              </li>
              <li class="d-flex justify-content-between align-items-center mb-1 fw-bold">
                <span>Tarifa de servicio</span>
                <strong data-booking-target="fee">$0.00</strong>
              </li>
              <li class="d-flex justify-content-between align-items-center border-top pt-2 mt-2">
                <span class="fw-bold">TOTAL</span>
                <strong class="fs-5" data-booking-target="total">$0.00</strong>
              </li>
            </ul>

            <!-- Hidden cents for server validation -->
            <%= f.hidden_field :unit_price_cents, value: (@service.price.to_f * 100).to_i %>
            <%= f.hidden_field :service_fee_cents, data: { booking_target: "feeCents" } %>
            <%= f.hidden_field :subtotal_cents,    data: { booking_target: "subtotalCents" } %>
            <%= f.hidden_field :total_price,       data: { booking_target: "totalCents" } %>
            <%= f.hidden_field :service_id, value: (@service.id) %>

            <%= f.submit "Reserva", class: "btn btn-primary fw-bold rounded-4 w-100 mt-2" %>
          <% end %>
        </div>
      </div>
    </div>
